messages:
  type: collection
  fields:
    id:
      type: string
      primary: true
      note: "Primary Key - e.g., UUID generated by the server upon message completion"

    chat_id:
      type: string
      indexed: true
      note: "Foreign Key linking back to the chats.id"

    encrypted_content:
      type: textfield
      note: "[Encrypted] The final, complete Tiptap JSON content of the message, encrypted using the chat's key from Vault"

    sender_name:
      type: string
      indexed: true
      note: "[Indexed] Contains the literal string 'user' or the specific name/identifier of the AI model/mate, e.g., 'Gemini', 'AssistantX'"

    created_at:
      type: datetime
      note: "Timestamp when the message was fully completed and persisted server-side"