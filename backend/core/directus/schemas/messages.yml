messages:
  type: collection
  fields:
    id: # message_id
      type: string
      note: "Primary Key - Unique identifier for the message. Format: {last_10_chars_of_chat_id}-{uuid_v4}. Generated by the initiator (client for user messages, server for AI messages)."

    chat_id:
      type: string
      note: "Foreign Key linking back to the chats.id"

    encrypted_content:
      type: textfield
      note: "[Encrypted] The final, complete Tiptap JSON content of the message, encrypted using the chat's key from Vault"

    sender_name:
      type: string
      note: "[Indexed] Contains the literal string 'user' or the specific name/identifier of the AI model/mate, e.g., 'Gemini', 'AssistantX'"

    created_at:
      type: datetime
      note: "Timestamp when the message was fully completed and persisted server-side"