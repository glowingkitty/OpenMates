directus_users:
  type: collection
  fields:
    is_admin:
      type: boolean
      note: "Is the user an admin?"

    last_opened:
      type: string
      length: 512
      note: "Last opened chat or signup step. Example: /chats/1234, /signup/step-3"

    last_online_timestamp:
      type: string
      length: 256
      note: "Timestamp of the last time the user was online"

    encrypted_email_address:
      type: string
      length: 512
      note: "Encrypted email address"

    encrypted_username:
      type: string
      length: 512
      note: "Encrypted username"

    encrypted_profileimage_url:
      type: string
      length: 512
      note: "Encrypted profile image URL"

    encrypted_credit_balance:
      type: string
      length: 512
      note: "Encrypted credit balance"

    encrypted_settings:
      type: string
      length: 2048
      note: "Encrypted user preferences"

    encrypted_devices:
      type: string
      length: 4096
      note: "Encrypted JSON containing device fingerprints and associated data"

    vault_key_id:
      type: string
      length: 64
      note: "Reference to the user's encryption key in Vault"

    vault_key_version:
      type: string
      length: 64
      note: "Version of the user's encryption key in Vault"

    api_key_hash:
      type: string
      length: 128
      note: "Hashed API key for developer access"

    encrypted_tfa_secret:
      type: string
      length: 512
      note: "Encrypted 2FA secret key"

    tfa_backup_codes_hashes:
      type: string
      length: 4096
      note: "Array of Argon2 hashed backup codes"

    encrypted_tfa_app_name:
      type: string
      length: 256
      note: "Encrypted name of the 2FA app used by the user"

    tfa_last_used:
      type: string
      length: 256
      note: "Timestamp of when 2FA was last successfully used"
    
    consent_tfa_safely_stored_timestamp:
      type: string
      length: 256
      note: "Timestamp of when the user consented to store 2FA safely"

    consent_privacy_and_apps_default_settings:
      type: string
      length: 256
      note: "Timestamp of when the user consented to default privacy and app settings"

    consent_mates_default_settings:
      type: string
      length: 256
      note: "Timestamp of when the user consented to default mates settings"