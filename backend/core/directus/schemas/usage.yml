usage:
  type: collection
  fields:
    id:
      type: uuid
      primary: true
      
    user_id_hash: # Changed from user_id
      type: string  # Changed from uuid
      length: 255 # Assuming a reasonable length for a hash
      note: "[Indexed] Hashed identifier of the user this usage entry belongs to."

    app_id: # Changed from app
      type: string
      length: 100 # Assuming app IDs are reasonably short
      note: "[Indexed] Identifier of the app this usage entry is associated with (e.g., 'ai', 'travel', 'health')."

    skill_id: # Changed from skill
      type: string
      length: 128 # Assuming a reasonable length for skill IDs
      note: "[Indexed] Identifier of the skill within the app that was executed (e.g., 'ask', 'search_web_page')."
      
    type:
      type: string
      length: 512
      note: "Type of usage: chat_message, api_call, etc."
      
    chat_id:
      type: string
      note: "Related chat (if applicable)"
      
    message_id:
      type: string
      length: 64
      note: "ID of the specific message within a chat (from encrypted content)"

    model_used:
      type: string
      length: 255
      note: "Full reference to the AI model used, if applicable (e.g., 'google/gemini-2.5-pro')."

    encrypted_credits_costs_system_prompt:
      type: string
      length: 512
      note: "Encrypted credit costs for system prompt"

    encrypted_credits_costs_history:
      type: string
      length: 512
      note: "Encrypted credit costs for the full chat history excluding system prompt"

    encrypted_credits_cost_response:
      type: string
      length: 512
      note: "Encrypted credit costs for generating response"

    encrypted_credits_cost_total:
      type: string
      length: 512
      note: "Encrypted total credit costs for this usage entry"

    encrypted_input_tokens:
      type: string
      length: 512
      note: "Encrypted input tokens (all systemprompt + chat history) used, if applicable."

    encrypted_output_tokens:
      type: string
      length: 512
      note: "Encrypted output tokens used for the response, if applicable."
      
    created_at:
      type: integer 
      note: "Unix timestamp (seconds) when this usage entry was first created. Application should provide this."

    updated_at:
      type: integer
      note: "Unix timestamp (seconds) when this usage entry was last updated. Application should provide this."