# backend/apps/uploads/.env.example
#
# Environment variables for the OpenMates Upload Server (dedicated VM).
# Copy this file to .env in the same directory and fill in all <PLACEHOLDER> values.
#
#   cp .env.example .env
#   nano .env
#
# On the upload VM, docker-compose.prod.yml overrides env_file to point here.
# On dev, the project root .env is used instead (via the base docker-compose.yml).
#
# See docs/architecture/file_upload.md for full documentation.

# ---------------------------------------------------------------------------
# Core API connection
# ---------------------------------------------------------------------------
# The ONLY external service the upload server contacts.
# Use the main API server's PRIVATE IP (internal network) â€” never the public IP.
# The main API server must allow incoming connections on port 8000 from this IP.
CORE_API_URL=http://<MAIN_SERVER_PRIVATE_IP>:8000

# Shared secret for internal service-to-service authentication.
# Must match the INTERNAL_API_SHARED_TOKEN configured on the main API server.
INTERNAL_API_SHARED_TOKEN=<SHARED_SECRET>

# ---------------------------------------------------------------------------
# Local Vault
# ---------------------------------------------------------------------------
# Root token for the local Vault instance (dev mode, in-memory).
# Generate a random UUID: python3 -c "import uuid; print(uuid.uuid4())"
# This token is only used locally by vault-setup to populate the Vault.
UPLOADS_VAULT_ROOT_TOKEN=<RANDOM_UUID>

# ---------------------------------------------------------------------------
# S3 Object Storage credentials
# ---------------------------------------------------------------------------
# These are migrated into the local Vault by vault-setup on startup.
# The upload service reads them from Vault at runtime (not from env vars directly).
SECRET__HETZNER__S3_ACCESS_KEY=<S3_ACCESS_KEY>
SECRET__HETZNER__S3_SECRET_KEY=<S3_SECRET_KEY>
SECRET__HETZNER__S3_REGION_NAME=<S3_REGION>

# ---------------------------------------------------------------------------
# SightEngine AI detection (optional)
# ---------------------------------------------------------------------------
# Used to detect AI-generated images. If not set, AI detection is disabled
# and uploads proceed without this check.
SECRET__SIGHTENGINE__API_USER=<SIGHTENGINE_USER>
SECRET__SIGHTENGINE__API_SECRET=<SIGHTENGINE_SECRET>

# ---------------------------------------------------------------------------
# Runtime configuration
# ---------------------------------------------------------------------------
SERVER_ENVIRONMENT=production
LOG_LEVEL=info
