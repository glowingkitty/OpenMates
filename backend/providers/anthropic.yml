# backend/providers/anthropic.yml
#
# Configuration for Anthropic AI services.

provider_id: "anthropic"
name: "Anthropic"
description: "AI models and services from Anthropic, including Claude family models."
logo_svg: "logos/anthropic.svg" # Path for UI, relative to a common logos directory

models:
  - id: "claude-haiku-4-5-20251001" # Official model ID
    name: "Claude Haiku 4.5"
    description: "Fastest and most affordable Claude model. Ideal for simple tasks and health checks."
    country_origin: "US"  # ISO 3166-1 alpha-2 country code for model origin
    # Allow this model to be selected by the intelligent auto-selection system.
    # Set to false to exclude from auto-selection until manually tested.
    allow_auto_select: false
    external_ids:  # Mapping to external leaderboard IDs for cross-referencing
      lmarena: "claude-haiku-4-5-20251001"  # Exact LMArena model name (if listed)
      openrouter: "anthropic/claude-haiku-4-5-20251001"
    input_types:
      - text
      - image
    output_types:
      - text
    default_server: "anthropic" # Default server for this model: anthropic or aws_bedrock
    servers:
      - id: "aws_bedrock"
        name: "AWS Bedrock"
        model_id: "anthropic.claude-haiku-4-5-20251001-v1:0" # Official model ID for AWS Bedrock
        region: "eu-central-1" # AWS region for this model
      - id: "anthropic"
        name: "Anthropic API"
        model_id: "claude-haiku-4-5-20251001" # Direct API uses the model ID as-is
    pricing: # Model-specific base pricing (example structure)
      tokens: 
        input:
          per_credit_unit: 350 # 1 credit per 350 input tokens (cheaper than Sonnet)
        output:
          per_credit_unit: 70  # 1 credit per 70 output tokens (cheaper than Sonnet)
    costs:
      input_per_million_token:
        price: 1.00
        currency: USD
        max_context: 200000 # Max context window for Claude 4 Haiku
      output_per_million_token:
        price: 5.00
        currency: USD
        max_context: 200000
      cache_write_per_million_token:
        price: 1.25
        currency: USD
      cache_read_per_million_token:
        price: 0.10
        currency: USD

  - id: "claude-sonnet-4-5-20250929" # Official model ID
    name: "Claude Sonnet 4.5"
    description: "Optimal balance of intelligence, cost, and speed."
    country_origin: "US"  # ISO 3166-1 alpha-2 country code for model origin
    allow_auto_select: false  # Enable after manual testing via @ai-model:claude-sonnet-4-5-20250929
    external_ids:  # Mapping to external leaderboard IDs for cross-referencing
      lmarena: "claude-sonnet-4-5-20250929"  # Exact LMArena model name
      openrouter: "anthropic/claude-sonnet-4-5-20250929"
    input_types:
      - text
      - image
    output_types:
      - text
    default_server: "anthropic" # Default server for this model: anthropic or aws_bedrock
    servers:
      - id: "aws_bedrock"
        name: "AWS Bedrock"
        model_id: "eu.anthropic.claude-sonnet-4-5-20250929-v1:0" # Official model ID for AWS Bedrock
        region: "eu-central-1" # AWS region for this model
      - id: "anthropic"
        name: "Anthropic API"
        model_id: "claude-sonnet-4-5-20250929" # Direct API uses the model ID as-is
    # Full reference for API calls would be "anthropic/claude-sonnet-4-20250514" (or similar based on client)
    pricing: # Model-specific base pricing (example structure)
      tokens: 
        input:
          per_credit_unit: 110 # 1 credit per 110 input tokens
        output:
          per_credit_unit: 20  # 1 credit per 20 output tokens
    costs:
      input_per_million_token:
        price: 3.00
        currency: USD
        max_context: 200000 # Max context window for Claude 4 Sonnet
      output_per_million_token:
        price: 15.00
        currency: USD
        max_context: 200000
      cache_write_per_million_token:
        price: 3.75
        currency: USD
      cache_read_per_million_token:
        price: 0.30
        currency: USD

  - id: "claude-opus-4-5-20251101" # Official model ID
    name: "Claude Opus 4.5"
    description: "Most powerful Claude model for highly complex tasks, research, and creative writing."
    country_origin: "US"  # ISO 3166-1 alpha-2 country code for model origin
    allow_auto_select: false  # Enable after manual testing via @ai-model:claude-opus-4-5-20251101
    external_ids:  # Mapping to external leaderboard IDs for cross-referencing
      lmarena: "claude-opus-4-5-20251101"  # Exact LMArena model name
      openrouter: "anthropic/claude-opus-4-5-20251101"
    input_types:
      - text
      - image
    output_types:
      - text
    default_server: "anthropic" # Default server for this model: anthropic or openrouter
    servers:
      - id: "anthropic"
        name: "Anthropic API"
        model_id: "claude-opus-4-5-20251101" # Direct API uses the model ID as-is
      - id: "openrouter"
        name: "OpenRouter API"
        model_id: "anthropic/claude-opus-4.5" # OpenRouter model identifier
    pricing: # Model-specific base pricing
      tokens: 
        input:
          per_credit_unit: 70 # 1 credit per 70 input tokens
        output:
          per_credit_unit: 15  # 1 credit per 15 output tokens
    costs:
      input_per_million_token:
        price: 5.00
        currency: USD
        max_context: 200000 # Max context window
      output_per_million_token:
        price: 25.00
        currency: USD
        max_context: 200000
      cache_write_per_million_token:
        price: 6.25
        currency: USD
      cache_read_per_million_token:
        price: 0.50
        currency: USD


# Pricing Formula:
# 1. Cost per token = (your_cost_usd_per_million * markup) / 1,000,000
# 2. Tokens per credit = credit_value_usd / cost_per_token
# 
# Where:
# - credit_value_usd = 0.001 (110 USD / 110,000 credits)
# - markup = 3 (3x your cost)
#
# Simplified: tokens_per_credit = 0.001 / ((your_cost_per_million * 3) / 1,000,000)
# Or even simpler: tokens_per_credit = 333.33 / your_cost_per_million
#
# Examples:
# - Input ($3.00/M): 333.33 / 3.00 = 111 tokens/credit → round to 150
# - Output ($15.00/M): 333.33 / 15.00 = 22 tokens/credit → round to 20

# FOR PER-UNIT PRICING (images, API calls, etc.):
# 1. Your price to user = your_cost_per_unit * markup
# 2. Credits per unit = your_price_to_user / credit_value_usd
#
# Simplified: credits_per_unit = (your_cost_per_unit * 3) / 0.001
# Or even simpler: credits_per_unit = your_cost_per_unit * 3000
#
# Per-Unit Examples:
# - Image ($0.04 each): 0.04 * 3000 = 120 credits per image
# - API call ($0.01 each): 0.01 * 3000 = 30 credits per call
