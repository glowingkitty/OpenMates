# backend/providers/google.yml
#
# Configuration for Google AI services.

provider_id: "google"
name: "Google"
description: "AI models and services from Google."
logo_svg: "logos/google.svg" # Path for UI, relative to a common logos directory

models:
  - id: "gemini-3-flash-preview"
    name: "Gemini 3 Flash"
    description: "Fast Gemini 3 preview model (primary: Google AI Studio; fallback: OpenRouter)."
    country_origin: "US" # ISO 3166-1 alpha-2 country code for model origin
    for_app_skill: "ai.ask" # This model is for the AI ask skill (text generation)
    release_date: "2025-12-17" # Model release date (Gemini 3 Flash preview release)
    allow_auto_select: true
    external_ids: # Mapping to external leaderboard IDs for cross-referencing
      lmarena: "gemini-3-flash"
      openrouter: "google/gemini-3-flash-preview"
    reasoning: true
    input_types:
      - text
      - image
      - video
      - audio
    output_types:
      - text
    default_server: "google_ai_studio"
    servers:
      - id: "google_ai_studio"
        name: "Google AI Studio"
        model_id: "gemini-3-flash-preview"
        region: "US" # Server region for UI display
      - id: "openrouter"
        name: "OpenRouter API"
        model_id: "google/gemini-3-flash-preview"
        region: "US" # Server region for UI display
    pricing:
      tokens:
        input:
          per_credit_unit: 650
        output:
          per_credit_unit: 110
    costs:
      input_per_million_token:
        price: 0.50
        currency: USD
        max_context: 1000000
      output_per_million_token:
        price: 3.00
        currency: USD
        max_context: 1000000
    features:
      knowledge_cutoff: "2025-01"

  - id: "gemini-3.1-pro-preview" # Official model ID
    name: "Gemini 3.1 Pro"
    description: "Better thinking, improved token efficiency, and stronger factual grounding over Gemini 3 Pro. Optimized for software engineering and agentic workflows with precise tool usage."
    country_origin: "US" # ISO 3166-1 alpha-2 country code for model origin
    for_app_skill: "ai.ask" # This model is for the AI ask skill (text generation)
    release_date: "2026-02-19" # Model release date (Gemini 3.1 Pro preview release)
    allow_auto_select: true
    external_ids: # Mapping to external leaderboard IDs for cross-referencing
      openrouter: "google/gemini-3.1-pro-preview"
    reasoning: true
    input_types:
      - text
      - image
      - video
      - audio
    output_types:
      - text
    default_server: "google_ai_studio" # AI Studio has more generous rate limits
    servers:
      - id: "google_ai_studio"
        name: "Google AI Studio"
        model_id: "gemini-3.1-pro-preview"
        region: "US" # Server region for UI display
      - id: "google"
        name: "Google Vertex AI"
        model_id: "gemini-3.1-pro-preview" # Google Vertex AI uses the model ID as-is
        region: "EU" # Server region for UI display (EU region for Vertex AI)
      - id: "openrouter"
        name: "OpenRouter API"
        model_id: "google/gemini-3.1-pro-preview"
        region: "US" # Server region for UI display
    pricing:
      tokens:
        input:
          per_credit_unit: 170 # 1 credit per 170 input tokens (for <=200K tokens: $2.00/M)
        output:
          per_credit_unit: 30 # 1 credit per 30 output tokens (for <=200K tokens: $12.00/M)
    costs:
      input_per_million_token:
        price: 2.00
        currency: USD
        max_context: 1048576 # 1M token context window
      output_per_million_token:
        price: 12.00
        currency: USD
        max_context: 1048576 # 1M token context window; output limit 65536 tokens
    features:
      knowledge_cutoff: "2025-01"
      # Note: For >200K tokens, pricing is $4.00/M input and $18.00/M output

  - id: "gemini-3-pro-image-preview"
    name: "Gemini 3 Pro"
    description: "High-end native image generation from Google, optimized for quality."
    country_origin: "US" # ISO 3166-1 alpha-2 country code for model origin
    for_app_skill: "images.generate" # This model is for image generation skill
    release_date: "2025-12-17" # Model release date (same as Gemini 3 Pro)
    allow_auto_select: false # Image model - not for text generation auto-selection
    external_ids: # Mapping to external leaderboard IDs for cross-referencing
      openrouter: "google/gemini-3-pro-image-preview"
    input_types:
      - text
    output_types:
      - image
    default_server: "google_ai_studio"
    servers:
      - id: "google_ai_studio"
        name: "Google AI Studio"
        model_id: "gemini-3-pro-image-preview"
        region: "US" # Server region for UI display
    pricing:
      per_unit:
        credits: 200
        unit_name: "image"
    costs:
      output_per_image:
        price: 0.134
        currency: USD

# Pricing Formula:
# 1. Cost per token = (your_cost_usd_per_million * markup) / 1,000,000
# 2. Tokens per credit = credit_value_usd / cost_per_token
#
# Where:
# - credit_value_usd = 0.001 (110 USD / 110,000 credits)
# - markup = 3 (3x your cost)
#
# Simplified: tokens_per_credit = 0.001 / ((your_cost_per_million * 3) / 1,000,000)
# Or even simpler: tokens_per_credit = 333.33 / your_cost_per_million
#
# Examples:
# - Input ($1.25/M): 333.33 / 1.25 = 267 tokens/credit → round to 300
# - Output ($10/M): 333.33 / 10 = 33 tokens/credit → round to 30
#
# FOR PER-UNIT PRICING (images, API calls, etc.):
# 1. Your price to user = your_cost_per_unit * markup
# 2. Credits per unit = your_price_to_user / credit_value_usd
#
# Simplified: credits_per_unit = (your_cost_per_unit * 3) / 0.001
# Or even simpler: credits_per_unit = your_cost_per_unit * 3000
#
# Per-Unit Examples:
# - Image ($0.04 each): 0.04 * 3000 = 120 credits per image
# - API call ($0.01 each): 0.01 * 3000 = 30 credits per call
