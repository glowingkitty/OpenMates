# backend/providers/moonshot.yml
# Moonshot AI provider configuration (Kimi models).
# Kimi models can be accessed via Together AI API (primary) with OpenRouter as fallback.

provider_id: "moonshot"
name: "Moonshot AI"
description: "Moonshot AI - Kimi multimodal thinking and agent models"
logo_svg: "logos/moonshotai.svg"

models:
  - id: "kimi-k2.5"
    name: "Kimi K2.5"
    description: "Kimi K2.5 is Moonshot AI's native multimodal thinking agent with vision and Agent Swarm capabilities. Features 1T total parameters (32B activated), native INT4 quantization for 2x inference speed, and 256K context window. Excels in visual coding, agentic tool-calling, and multi-step reasoning. Primary: Together AI; Fallback: OpenRouter."
    country_origin: "CN" # ISO 3166-1 alpha-2 country code for model origin (China)
    for_app_skill: "ai.ask" # This model is for the AI ask skill (text generation)
    release_date: "2026-01-27" # Model release date (Kimi K2.5 released January 27, 2026)
    allow_auto_select: true
    reasoning: true
    external_ids: # Mapping to external leaderboard IDs for cross-referencing
      lmarena: "kimi-k2.5"
      openrouter: "moonshotai/kimi-k2.5"
    input_types:
      - text
      - image
    output_types:
      - text
    default_server: "together" # Default to Together AI for serverless inference
    servers:
      - id: "together"
        name: "Together AI"
        model_id: "moonshotai/Kimi-K2.5" # Together AI model identifier (primary)
        region: "US" # Server region for UI display
      - id: "openrouter"
        name: "OpenRouter"
        model_id: "moonshotai/kimi-k2.5" # OpenRouter's model identifier (fallback)
        region: "US" # Server region for UI display
    pricing:
      tokens:
        input:
          per_credit_unit: 650 # Based on $0.50/M input (Together AI): 333.33 / 0.50 = 666, rounded to 650
        output:
          per_credit_unit: 120 # Based on $2.80/M output (Together AI): 333.33 / 2.80 = 119, rounded to 120
    costs:
      input_per_million_token:
        price: 0.50
        currency: USD
        max_context: 262144
      output_per_million_token:
        price: 2.80
        currency: USD
        max_context: 262144
    features:
      knowledge_cutoff: "2025-10"
      max_output_tokens: 65536
      tool_use: true
      streaming: true

# Pricing Formula:
# 1. Cost per token = (your_cost_usd_per_million * markup) / 1,000,000
# 2. Tokens per credit = credit_value_usd / cost_per_token
#
# Where:
# - credit_value_usd = 0.001 (110 USD / 110,000 credits)
# - markup = 3 (3x your cost)
#
# Simplified: tokens_per_credit = 333.33 / your_cost_per_million
#
# Examples for Kimi K2.5 (Together AI pricing):
# - Input ($0.50/M): 333.33 / 0.50 = 666 tokens/credit -> round to 650
# - Output ($2.80/M): 333.33 / 2.80 = 119 tokens/credit -> round to 120
