# =============================================================================
# OpenMates Self-Hosted Edition - Environment Configuration
# =============================================================================
#
# IMPORTANT: OpenMates does not have any funding and relies on supporter
# contributions. If you want to support the development of OpenMates, please
# consider supporting via GitHub Sponsors:
# https://github.com/sponsors/glowingkitty
#
# Your support helps ensure OpenMates continues to be developed as a user
# interests & privacy-first alternative to big tech AI chatbots & AI agents.
#
# =============================================================================

# =============================================================================
# REQUIRED API KEYS (Minimum for basic functionality)
# =============================================================================
# These API keys are required for OpenMates to function properly.
# Without these, core features will not work.

# Mistral AI - LLM Provider (REQUIRED)
# Used by: AI app - LLM inference pre- and post-processing
# Purpose: Preprocessing and postprocessing of LLM requests (analyzing user intent,
#          selecting appropriate tools, formatting responses)
# Get your API key from: https://console.mistral.ai/api-keys/
SECRET__MISTRAL_AI__API_KEY=

# Cerebras - LLM Provider (REQUIRED)
# Used by: AI app - LLM inference processing
# Purpose: Main LLM inference for AI conversations and responses
# Get your API key from: https://www.cerebras.ai/
SECRET__CEREBRAS__API_KEY=

# =============================================================================
# RECOMMENDED API KEYS (App use & Enhanced functionality)
# =============================================================================
# These API keys are highly recommended for full functionality. 
# Groq is REQUIRED if you want to use skills that access external data 
# (Web Search, Reading Websites, Video Transcripts, etc.).

# Groq - LLM Provider (RECOMMENDED / REQUIRED FOR APPS)
# Used by: AI app - LLM inference content sanitization
# Purpose: Sanitizing content from external providers (web pages, video transcripts, etc.)
#          against prompt injection attacks before including in chat responses.
#          MANDATORY for using skills that retrieve external content.
# Get your API key from: https://console.groq.com/keys
SECRET__GROQ__API_KEY=

# Brave Search - Web search (RECOMMENDED)
# Used by: web.search, videos.search, news.search skills
# Purpose: Web search functionality for finding information online
#          - Web app: Search the web for information
#          - Videos app: Search for YouTube videos
#          - News app: Search for news articles
# Get your API key from: https://brave.com/search/api/
SECRET__BRAVE__API_KEY=

# Firecrawl - Web scraping (RECOMMENDED)
# Used by: web.read skill
# Purpose: Web page reading and content extraction
#          - Scrapes and extracts content from web pages for analysis
# Get your API key from: https://firecrawl.dev/app
SECRET__FIRECRAWL__API_KEY=

# Webshare - Proxy service (RECOMMENDED)
# Used by: videos.get_transcript skill
# Purpose: Proxy service for accessing YouTube transcript API
#          - Routes YouTube transcript requests through proxy to avoid IP blocks
#          - Required for more reliable YouTube transcript fetching
# Get your API key from: https://webshare.io/
SECRET__WEBSHARE__PROXY_USERNAME=
SECRET__WEBSHARE__PROXY_PASSWORD=

# Google YouTube API - Video transcripts (RECOMMENDED)
# Used by: videos.get_transcript skill
# Purpose: Fetching video metadata from YouTube
#          - Retrieves video information (title, description, duration, etc.)
#          - Used in conjunction with Webshare's proxy for transcript fetching
# Get your API key from: https://console.cloud.google.com/apis/credentials
SECRET__YOUTUBE__API_KEY=

# =============================================================================
# OPTIONAL API KEYS (Additional features)
# =============================================================================
# These API keys enable additional features but are completely optional.
# The server will start and run without these keys - features that require
# them will simply be disabled.

# Google Maps - Location services (OPTIONAL)
# Used by: maps.search skill
# Purpose: Place search and location-based features
#          - Search for places, restaurants, businesses, etc.
#          - Get location information and details
# Get your API key from: https://console.cloud.google.com/apis/credentials
SECRET__GOOGLE_MAPS__API_KEY=

# SerpAPI - Google Flights search
# Used by: travel.search_connections skill
# Purpose: Search for flights via Google Flights with booking links
#          - Comprehensive flight coverage via Google's data
#          - Real-time pricing with booking URLs to airlines and OTAs
#          - Rich metadata: CO2 emissions, legroom, delay warnings
# Get your API key from: https://serpapi.com/manage-api-key
SECRET__SERPAPI__API_KEY=

# Travelpayouts (Aviasales) - Price calendar data (FREE)
# Used by: travel.price_calendar skill
# Purpose: Monthly flight price heatmap using cached search data (~48h old)
# Get your token from: https://app.travelpayouts.com/profile/api-token
SECRET__TRAVELPAYOUTS__API_KEY=

# Context7 - For loading up to date docs
# Used by: code.get_docs skill
# Purpose: Get the latest docs about libraries via Context7
# Get your API key from: https://context7.com/dashboard
SECRET__CONTEXT7__API_KEY=

# Fal.ai - For generating images, videos, audio and other generative media
# Used by: images.generate_draft, images.generate
# Purpose: Generate images
# Get your API key from https://fal.ai/dashboard/keys
SECRET__FAL__API_KEY=

# Recraft - For generating vector images (SVG)
# Used by: images.generate skill (SVG output type)
# Purpose: Generate vector images (SVG) via Recraft's recraftv4_vector and recraftv4_pro_vector models
# Get your API key from: https://www.recraft.ai/profile/api-tokens
SECRET__RECRAFT__API_KEY=

# Sightengine - Image moderation (OPTIONAL)
# Used by: Profile image uploads, content moderation, and app-uploads microservice (AI-generated image detection)
# Purpose: Content moderation for uploaded images
#          - Validates profile images for inappropriate content
#          - Ensures uploaded images comply with content policies
#          - Detects AI-generated images in chat file uploads (genai model, tag-only — never blocks)
# Get your API key from: https://sightengine.com/
SECRET__SIGHTENGINE__API_USER=
SECRET__SIGHTENGINE__API_SECRET=

# Together AI - Additional LLM provider (OPTIONAL)
# Purpose: Access to open-source models via Together AI (e.g., Kimi K2.5)
# Get your API key from: https://api.together.xyz/settings/api-keys
SECRET__TOGETHER__API_KEY=

# OpenRouter - Additional LLM provider (OPTIONAL)
# Purpose: Access to additional LLM models via OpenRouter
# Get your API key from: https://openrouter.ai/keys
SECRET__OPENROUTER__API_KEY=

# Google AI Studio (Gemini API) - Optional LLM access (OPTIONAL)
# Purpose: Access Gemini models via the Google AI Studio API (used for models like `google/gemini-3-flash-preview`)
# Get your API key from: https://aistudio.google.com/app/apikey
SECRET__GOOGLE_AI_STUDIO__API_KEY=

# Anthropic - Additional LLM provider (OPTIONAL)
# Purpose: Access to Claude models via Anthropic
# Get your API key from: https://console.anthropic.com/
SECRET__ANTHROPIC__API_KEY=

# Anthropic via AWS Bedrock (OPTIONAL)
# Purpose: Access to Claude models via AWS Bedrock
# Requires AWS credentials and region configuration
SECRET__ANTHROPIC__AWS_ACCESS_KEY_ID=
SECRET__ANTHROPIC__AWS_SECRET_ACCESS_KEY=
SECRET__ANTHROPIC__AWS_REGION=

# OpenAI - Additional LLM provider (OPTIONAL)
# Purpose: Access to OpenAI models
# Get your API key from: https://platform.openai.com/api-keys
SECRET__OPENAI__API_KEY=

# OpenAI Azure - Additional LLM provider (OPTIONAL)
# Purpose: Access to OpenAI models via Azure
SECRET__OPENAI__AZURE__API_KEY=
SECRET__OPENAI__AZURE__ENDPOINT_URL=
SECRET__OPENAI__AZURE__DEPLOYMENT_NAME=

# Google Service Account - Additional services (OPTIONAL)
# Purpose: Google Cloud services integration
SECRET__GOOGLE__SERVICE_ACCOUNT_JSON=
SECRET__GOOGLE__PROJECT_ID=

# =============================================================================
# AI / LLM TIMEOUTS (OPTIONAL)
# =============================================================================
# These control how long the AI worker waits for streamed responses to start.
# If you see errors like: "First chunk not received within 10.0s", increase these.
#
# Global default timeout (seconds) for the first streamed chunk across all providers.
# AI_FIRST_CHUNK_TIMEOUT_SECONDS=10
#
# Timeout (seconds) for models marked as `reasoning: true` in provider configs.
# AI_REASONING_FIRST_CHUNK_TIMEOUT_SECONDS=60

# =============================================================================
# PAYMENT/BILLING (NOT NEEDED FOR SELF-HOSTED)
# =============================================================================
# These are only required for the official cloud version (openmates.org).
# Self-hosted deployments do not need payment processing.
# All payment-related features are automatically disabled in self-hosted mode.
#
# If you see these in your Vault, you can safely ignore them for self-hosted:
# - SECRET__STRIPE__* (all Stripe keys)
# - SECRET__REVOLUT_BUSINESS__* (all Revolut keys)
# - SECRET__POLAR__* (all Polar keys)
# - SECRET__INVOICE_NINJA__* (all Invoice Ninja keys)
# - SECRET__INVOICE_SENDER__* (invoice sender information)

# Polar - Payment provider for non-EU users (cloud-only)
# Used by: Payment routes for non-EU credit purchases
# Purpose: Merchant of Record payment provider for non-EU users (US, CA, AU, etc.)
#          - Polar handles all tax compliance (VAT, GST, US Sales Tax) automatically
#          - EU users continue to use Stripe
# Sign up at: https://polar.sh
# Production token: https://polar.sh/settings -> Access Tokens
# Webhook secret: https://polar.sh/dashboard/<org>/settings/webhooks -> Add endpoint
#   Endpoint URL: https://api.yourdomain.com/v1/payments/webhook
#   Events to subscribe: checkout.updated
# Sandbox token: https://sandbox.polar.sh/settings -> Access Tokens
# Sandbox webhook: https://sandbox.polar.sh/dashboard/<org>/settings/webhooks
# SECRET__POLAR__PRODUCTION_ACCESS_TOKEN=
# SECRET__POLAR__SANDBOX_ACCESS_TOKEN=
# SECRET__POLAR__PRODUCTION_WEBHOOK_SECRET=
# SECRET__POLAR__SANDBOX_WEBHOOK_SECRET=

# =============================================================================
# DEPLOYMENT / SERVER PROVISIONING
# =============================================================================
# Used by: scripts/render-deploy-config.py to render cloud-init and Caddyfile
#          templates with your actual values.
#
# These are NOT read by the application at runtime — only by the deploy script.
# Fill these in before running: python scripts/render-deploy-config.py <template>

# Server user account (created by cloud-init, used for SSH access)
DEPLOY_USERNAME=

# Your SSH public key for server access (paste the full key, e.g. ssh-ed25519 AAAA... user@host)
DEPLOY_SSH_PUBLIC_KEY=

# ACME email for Let's Encrypt TLS certificate issuance
DEPLOY_ACME_EMAIL=

# Domain for the upload server (e.g. upload.example.com)
DEPLOY_UPLOAD_DOMAIN=

# Domain for the main API server (e.g. api.example.com)
DEPLOY_API_DOMAIN=

# Domain for the frontend web app (e.g. app.example.com or example.com)
DEPLOY_FRONTEND_DOMAIN=

# Private IP of the main API server (for internal service-to-service communication)
DEPLOY_MAIN_SERVER_PRIVATE_IP=

# =============================================================================
# DATABASE & CORE SERVICES
# =============================================================================
# These should be generated via setup script before starting docker-compose.
# Needed by docker-compose, therefore must stay in .env

# Directus CMS
DATABASE_ADMIN_EMAIL=
DATABASE_ADMIN_PASSWORD=
DIRECTUS_TOKEN=
DIRECTUS_SECRET=
REPORT_ISSUE_EMAIL=
ADMIN_NOTIFY_EMAIL=

# PostgreSQL Database
DATABASE_NAME=directus
DATABASE_USERNAME=directus
DATABASE_PASSWORD=

# Dragonfly (Redis-compatible cache)
DRAGONFLY_PASSWORD=

# Internal API - Shared token for communication between core API and apps
INTERNAL_API_SHARED_TOKEN=

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server Environment
# Options: "development" or "production"
SERVER_ENVIRONMENT=production

# Frontend URLs
# Comma-separated list of allowed frontend URLs
# Example: "http://localhost:5173,https://yourdomain.com"
FRONTEND_URLS="http://localhost:5173"

# Signup Limit
# Limit how many people can sign up without requiring invite code
# Set to 0 to disable limit
# Useful for rolling out step by step to more users while ensuring performance
SIGNUP_LIMIT=20

# Signup Domain Restriction (optional)
# Uncomment to restrict signup to a specific domain
# Example: SIGNUP_DOMAIN_RESTRICTION="yourdomain.com"
# SIGNUP_DOMAIN_RESTRICTION="openmates.org"
